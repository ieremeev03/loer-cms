import{K as u,T as w,o as a,d as r,a as c,u as s,w as g,F as _,Z as F,b as l,g as M,e as v,c as x,j as k,i as p,k as T,l as E,O as J}from"./app-3ae83856.js";import{_ as b}from"./InputError-703080cb.js";import{_ as V}from"./InputLabel-499c3979.js";import{P}from"./PrimaryButton-636abc6b.js";import{_ as z}from"./TextInput-3fb2315c.js";import{_ as X}from"./TextArea-381a7d48.js";import{_ as K}from"./AdminLayout-67c7ea1d.js";import{_ as R}from"./image-e731e5ca.js";import{_ as Z,a as q}from"./content-637718ab.js";import{_ as A,a as G}from"./radio-be22ae76.js";import"./TextArea.vue_vue_type_style_index_0_lang-8b6ad6f3.js";/* empty css            */const H={class:"bg-white md:flex md:flex-row"},Q={class:"p-4 mt-6 space-y-6 w-full"},W=l("h2",{class:"text-lg font-medium text-black-50"},"Редактирование инфоблока",-1),Y={class:"space-y-2"},ee={key:0,class:"space-y-6"},te=l("h2",{class:"text-lg font-medium text-black-50 mb-2"},"Свойства",-1),se={key:1,class:"space-y-6"},le=l("h2",{class:"text-lg font-medium text-black-50 mb-2"},"Элементы",-1),oe=["id"],ie={class:"flex flex-row items-center justify-end gap-2"},ne=["onClick"],ae=["onClick"],re=l("svg",{fill:"currentColor",height:"10px",width:"10px",version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 330 330","xml:space":"preserve"},[l("path",{id:"XMLID_224_",d:`M325.606,229.393l-150.004-150C172.79,76.58,168.974,75,164.996,75c-3.979,0-7.794,1.581-10.607,4.394
                                                l-149.996,150c-5.858,5.858-5.858,15.355,0,21.213c5.857,5.857,15.355,5.858,21.213,0l139.39-139.393l139.397,139.393
                                                C307.322,253.536,311.161,255,315,255c3.839,0,7.678-1.464,10.607-4.394C331.464,244.748,331.464,235.251,325.606,229.393z`})],-1),ce=[re],de=["onClick"],me=l("svg",{fill:"currentColor",height:"10px",width:"10px",version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 330 330","xml:space":"preserve"},[l("path",{id:"XMLID_225_",d:`M325.607,79.393c-5.857-5.857-15.355-5.858-21.213,0.001l-139.39,139.393L25.607,79.393
                                            c-5.857-5.857-15.355-5.858-21.213,0.001c-5.858,5.858-5.858,15.355,0,21.213l150.004,150c2.813,2.813,6.628,4.393,10.606,4.393
                                            s7.794-1.581,10.606-4.394l149.996-150C331.465,94.749,331.465,85.251,325.607,79.393z`})],-1),pe=[me],ue={class:"flex items-center gap-4"},_e={key:0,class:"text-sm text-gray-600 dark:text-gray-400"},Ue={__name:"Edit",props:{status:{type:String}},setup(fe){const C={Image:R,Text:A,Radio:G,Video:Z,Content:q},h=t=>C[t],d=u().props.block,y=u().props.props;let $=u().props.items;const O=u().props.fields,e=w({title:d.title,content:d.content,items:$,properties:y});w({id:d.id});function U(t){let i=e.items.splice(t,1);e.items.splice(t-1,0,i[0])}function B(t){let i=e.items.splice(t,1);e.items.splice(t+1,0,i[0])}function D(){let t=JSON.parse(JSON.stringify(O));e.items[Object.keys(e.items).length]=Object.assign({},t)}function I(t){confirm("Вы действительно хотите удалить элеиент?")&&(e.items[t].remove=!0,document.getElementById("item_"+t).remove())}function j(t){console.log(t[0][0],t[1],t[2]);let i=t[1],n=t[2];console.log(e.items),e.items[i].fields[n].file=t[0]}function N(t){console.log(t[0][0]);let i=t[2];e.properties[i].file=t[0]}function L(){console.log(d),confirm("Вы действительно хотите удалить страницу?")&&J.delete(route("menus.destroy",d.id))}return(t,i)=>(a(),r(_,null,[c(s(F),{title:"Редактирование меню - "+s(d).title},null,8,["title"]),c(K,null,{default:g(()=>[l("section",null,[l("form",{onSubmit:i[2]||(i[2]=M(n=>s(e).patch(t.route("infoblocks.update",s(d))),["prevent"]))},[l("div",H,[l("div",Q,[W,l("div",null,[c(V,{for:"title",value:"Название блока"}),c(z,{id:"title",type:"text",class:"mt-1 block w-full",modelValue:s(e).title,"onUpdate:modelValue":i[0]||(i[0]=n=>s(e).title=n),autofocus:"",autocomplete:"title"},null,8,["modelValue"]),c(b,{class:"mt-2",message:s(e).errors.title},null,8,["message"])]),l("div",null,[c(V,{for:"content",value:"Текст блока",class:"mb-1"}),c(X,{modelValue:s(e).content,"onUpdate:modelValue":i[1]||(i[1]=n=>s(e).content=n),class:"mt-1 block w-full"},null,8,["modelValue"]),c(b,{class:"mt-2",message:s(e).errors.title},null,8,["message"])]),l("div",Y,[Object.keys(s(y)).length>0?(a(),r("div",ee,[te,(a(!0),r(_,null,v(s(e).properties,(n,o)=>(a(),x(k(h(n.type)),{title:n.title,list:JSON.parse(n.list),item_id:parseInt(o),field_id:o,field_value:n.value,modelValue:s(e).properties[o].value,"onUpdate:modelValue":m=>s(e).properties[o].value=m,onFilesDropped:N},null,40,["title","list","item_id","field_id","field_value","modelValue","onUpdate:modelValue"]))),256))])):p("",!0),s(d).array?(a(),r("div",se,[le,(a(!0),r(_,null,v(s(e).items,(n,o)=>(a(),r("div",{key:o,class:"p-4 bg-gray-50 rounded-lg",id:"item_"+o},[(a(!0),r(_,null,v(n.fields,(m,f)=>(a(),x(k(h(m.field.type)),{title:m.field.title,list:null,item_id:parseInt(o),field_id:f,field_value:m.value,modelValue:s(e).items[o].fields[f].value,"onUpdate:modelValue":S=>s(e).items[o].fields[f].value=S,onFilesDropped:j},null,40,["title","item_id","field_id","field_value","modelValue","onUpdate:modelValue"]))),256)),l("div",ie,[l("span",{class:"cursor-pointer bg-red-500 p-2 rounded-lg text-xs text-white",onClick:m=>I(o)},"Удалить",8,ne),o>0?(a(),r("span",{key:0,class:"cursor-pointer p-2 bg-indigo-500 rounded-lg text-xs text-white",onClick:m=>U(o)},ce,8,ae)):p("",!0),o<Object.keys(s(e).items).length-1?(a(),r("span",{key:1,class:"cursor-pointer p-2 bg-indigo-500 rounded-lg text-xs text-white",onClick:m=>B(o)},pe,8,de)):p("",!0)])],8,oe))),128)),l("div",{class:"h-50 flex flex-col items-center justify-center bg-gray-50 p-6 rounded-lg"},[l("span",{class:"cursor-pointer p-2 bg-indigo-500 rounded-lg text-xs text-white",onClick:D},"Добавить")])])):p("",!0),l("div",ue,[c(P,{disabled:s(e).processing},{default:g(()=>[T("Сохранить")]),_:1},8,["disabled"]),l("button",{onClick:L},"Удалить")]),c(E,{"enter-active-class":"transition ease-in-out","enter-from-class":"opacity-0","leave-active-class":"transition ease-in-out","leave-to-class":"opacity-0"},{default:g(()=>[s(e).recentlySuccessful?(a(),r("div",_e,"Сохранено")):p("",!0)]),_:1})])])])],32)])]),_:1})],64))}};export{Ue as default};
