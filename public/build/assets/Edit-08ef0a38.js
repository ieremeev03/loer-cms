import{r as M,q as U,o as r,i as L,w as h,a as c,u as P,Z as z,b as e,c as n,h as g,F as y,g as d,e as f,t as m,k as b,s as k}from"./app-f67f8061.js";import{_ as F}from"./AdminLayout-66783649.js";import{P as w}from"./PrimaryButton-47d9c09e.js";import{_ as N}from"./TextInput-8c6a9c86.js";import{_ as V}from"./InputLabel-709b3333.js";import{_ as $}from"./image-03da2595.js";/* empty css            */import"./_plugin-vue_export-helper-c27b6911.js";const j={class:"py-12"},E={class:"max-w-7xl mx-auto sm:px-6 lg:px-8 space-y-6"},O=e("h2",{class:"text-lg font-medium text-black-50"},"Редактирвоание инструктора",-1),S={class:"space-y-6"},q={class:"mb-2"},T={class:"mb-2"},Y={class:"mb-2"},Z=["onUpdate:modelValue"],A={key:0,class:""},G={key:1,class:"inline-block min-w-full py-2 align-middle sm:px-6 lg:px-2"},H={class:"min-w-full divide-y divide-gray-300"},I={class:"divide-y divide-gray-200 bg-white"},J={class:"whitespace-nowrap py-4 pl-4 pr-4 text-sm font-medium text-gray-900 sm:pl-0"},K={class:"whitespace-nowrap py-4 pl-4 pr-4 text-sm font-medium text-gray-900 sm:pl-0"},Q=["onUpdate:modelValue","disabled"],R={class:"whitespace-nowrap py-4 pl-4 pr-4 text-sm font-medium text-gray-900 sm:pl-0"},W={key:0},X={key:2,class:"rounded-md bg-red-50 p-4 mb-2"},ee={class:"flex"},te=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.28 7.22a.75.75 0 00-1.06 1.06L8.94 10l-1.72 1.72a.75.75 0 101.06 1.06L10 11.06l1.72 1.72a.75.75 0 101.06-1.06L11.06 10l1.72-1.72a.75.75 0 00-1.06-1.06L10 8.94 8.28 7.22z","clip-rule":"evenodd"})])],-1),se={class:"ml-3"},oe={class:"text-sm font-medium text-red-800"},le={key:3,class:"rounded-md bg-green-50 p-4 mb-3"},ie=e("div",{class:"flex"},[e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-5 w-5 text-green-400",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z","clip-rule":"evenodd"})])]),e("div",{class:"ml-3"},[e("h3",{class:"text-sm font-medium text-green-800"},"Сохранено")])],-1),re=[ie],ae={key:4,class:"mt-2 space-x-6"},ne=["href"],ve={__name:"Edit",props:{instructor:Object,disciplines:Object},setup(o){const s=o,v=M(null);let _=null;const C=l=>{if(!l)return;let i=l.getDate(),a=l.getMonth()+1;_=l.getFullYear()+"-"+(a<=9?"0"+a:a)+"-"+(i<=9?"0"+i:i);let u=s.instructor.id;axios.post(route("instructor.schedule"),{selected_date:_,instructor_id:u}).then(p=>{s.instructor.times=p.data}).catch(p=>{console.log(p)})},B=()=>{_=null,s.instructor.times=null};function D(l){console.log(l[0][0]),l[2],s.instructor.image=l[0]}const x=()=>{var i;s.instructor.error=null;let l=null;(i=s.instructor)!=null&&i.times&&(l=s.instructor.times.filter(a=>a.active===!0)),axios.post(route("instructor.save"),{selected_date:_,active_times:l,instructor_id:s.instructor.id,instructor_name:s.instructor.name,instructor_image:s.instructor.image,disciplines:s.disciplines}).then(a=>{s.instructor.id||window.location.replace(route("instructors")),s.instructor.success=!0}).catch(a=>{s.instructor.error=a.response.data.message})};return(l,i)=>{const a=U("VueDatePicker");return r(),L(F,null,{default:h(()=>[c(P(z),{title:"Административная панель"}),e("div",j,[e("div",E,[O,e("div",S,[e("div",q,[c(V,{for:"name",value:"Имя"}),c(N,{id:"name",type:"text",class:"mt-1 block w-full",modelValue:o.instructor.name,"onUpdate:modelValue":i[0]||(i[0]=t=>o.instructor.name=t),autofocus:"",autocomplete:"name"},null,8,["modelValue"])]),e("div",T,[c($,{title:"Фото инструктора",item_id:0,field_id:"image",field_value:o.instructor.image,"model-value":o.instructor.image,folder:"instructors",onFilesDropped:D},null,8,["field_value","model-value"])]),e("div",Y,[c(V,{value:"Дисциплины"}),(r(!0),n(y,null,g(o.disciplines,t=>(r(),n("div",null,[e("label",null,[b(e("input",{type:"checkbox","onUpdate:modelValue":u=>t.selected=u,class:"mr-2"},null,8,Z),[[k,t.selected]]),f(m(t.name),1)])]))),256))]),o.instructor.id?(r(),n("div",A,[c(a,{format:"dd/MM/yyyy",modelValue:v.value,"onUpdate:modelValue":[i[1]||(i[1]=t=>v.value=t),C],"enable-time-picker":!1,position:"left",placeholder:"Дата",locale:"ru",onCleared:B,"select-text":"Подтвердить","cancel-text":"Закрыть"},null,8,["modelValue"])])):d("",!0),o.instructor.times?(r(),n("div",G,[e("table",H,[e("tbody",I,[(r(!0),n(y,null,g(o.instructor.times,t=>(r(),n("tr",null,[e("td",J,m(t.start)+" - "+m(t.end),1),e("td",K,[b(e("input",{type:"checkbox","onUpdate:modelValue":u=>t.active=u,disabled:t.selected===!0},null,8,Q),[[k,t.active]])]),e("td",R,[t.discipline?(r(),n("span",W,"Забронировано: "+m(t.discipline),1)):d("",!0)])]))),256))])])])):d("",!0),c(w,{onClick:x},{default:h(()=>[f("Сохранить")]),_:1}),o.instructor.error?(r(),n("div",X,[e("div",ee,[te,e("div",se,[e("h3",oe,m(o.instructor.error),1)])])])):d("",!0),o.instructor.success?(r(),n("div",le,re)):d("",!0),o.instructor.times?(r(),n("div",ae,[c(w,{onClick:x},{default:h(()=>[f("Сохранить")]),_:1}),e("a",{href:l.route("instructors"),class:"text-sm font-semibold text-gray-900"},"Отмена",8,ne)])):d("",!0)])])])]),_:1})}}};export{ve as default};
