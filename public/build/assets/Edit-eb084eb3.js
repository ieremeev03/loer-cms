import{f as B,r as D,o as r,c as M,w as v,a as c,u as L,Z as P,b as e,d as n,e as x,h as g,m as y,k as b,t as m,F as k,i as d}from"./app-65f094bf.js";import{_ as $}from"./AdminLayout-370809b3.js";import{P as z}from"./PrimaryButton-037c53ef.js";import{_ as F}from"./TextInput-3c80bb14.js";import{_ as f}from"./InputLabel-4f5ee1ee.js";import{_ as N}from"./image-a621934d.js";import{_ as j}from"./TextArea-cd363ed1.js";/* empty css            */import"./TextArea.vue_vue_type_style_index_0_lang-4bbe33f9.js";const E={class:"py-12"},O={class:"max-w-7xl mx-auto sm:px-6 lg:px-8 space-y-6"},S=e("h2",{class:"text-lg font-medium text-black-50"},"Редактирвоание инструктора",-1),T={class:"space-y-6"},Y={class:"mb-2"},Z={class:"mb-2"},q={class:"mb-2"},A={class:"mb-2"},G=["onUpdate:modelValue"],H={key:0,class:""},I={key:1,class:"inline-block min-w-full py-2 align-middle sm:px-6 lg:px-2"},J={class:"min-w-full divide-y divide-gray-300"},K={class:"divide-y divide-gray-200 bg-white"},Q={class:"whitespace-nowrap p-4 text-sm font-medium text-gray-900"},R={class:"whitespace-nowrap p-4 text-sm font-medium text-gray-900"},W=["onUpdate:modelValue","disabled"],X={class:"whitespace-nowrap p-4 text-sm font-medium text-gray-900"},ee={key:0},te={key:2,class:"rounded-md bg-red-50 p-4 mb-2"},se={class:"flex"},oe=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.28 7.22a.75.75 0 00-1.06 1.06L8.94 10l-1.72 1.72a.75.75 0 101.06 1.06L10 11.06l1.72 1.72a.75.75 0 101.06-1.06L11.06 10l1.72-1.72a.75.75 0 00-1.06-1.06L10 8.94 8.28 7.22z","clip-rule":"evenodd"})])],-1),ie={class:"ml-3"},le={class:"text-sm font-medium text-red-800"},re={key:3,class:"rounded-md bg-green-50 p-4 mb-3"},ae=e("div",{class:"flex"},[e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-5 w-5 text-green-400",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z","clip-rule":"evenodd"})])]),e("div",{class:"ml-3"},[e("h3",{class:"text-sm font-medium text-green-800"},"Сохранено")])],-1),ne=[ae],ce={key:4,class:"mt-2 space-x-6"},ge={__name:"Edit",props:{instructor:Object,disciplines:Object},setup(s){const o=s,h=B(null);let _=null;const w=l=>{if(!l)return;let i=l.getDate(),a=l.getMonth()+1;_=l.getFullYear()+"-"+(a<=9?"0"+a:a)+"-"+(i<=9?"0"+i:i);let u=o.instructor.id;axios.post(route("instructor.schedule"),{selected_date:_,instructor_id:u}).then(p=>{o.instructor.times=p.data}).catch(p=>{console.log(p)})},V=()=>{_=null,o.instructor.times=null};function C(l){console.log(l[0][0]),l[2],o.instructor.image=l[0]}const U=()=>{var i;o.instructor.error=null;let l=null;(i=o.instructor)!=null&&i.times&&(l=o.instructor.times.filter(a=>a.active===!0)),axios.post(route("instructor.save"),{selected_date:_,active_times:l,instructor_id:o.instructor.id,instructor_name:o.instructor.name,instructor_image:o.instructor.image,instructor_description:o.instructor.description,disciplines:o.disciplines}).then(a=>{o.instructor.id||window.location.replace(route("instructors")),o.instructor.success=!0}).catch(a=>{o.instructor.error=a.response.data.message})};return(l,i)=>{const a=D("VueDatePicker");return r(),M($,null,{default:v(()=>[c(L(P),{title:"Административная панель"}),e("div",E,[e("div",O,[S,e("div",T,[e("div",Y,[c(f,{for:"name",value:"Имя"}),c(F,{id:"name",type:"text",class:"mt-1 block w-full",modelValue:s.instructor.name,"onUpdate:modelValue":i[0]||(i[0]=t=>s.instructor.name=t),autofocus:"",autocomplete:"name"},null,8,["modelValue"])]),e("div",Z,[c(f,{for:"description",value:"Описание"}),c(j,{id:"description",type:"text",class:"mt-1 block w-full",modelValue:s.instructor.description,"onUpdate:modelValue":i[1]||(i[1]=t=>s.instructor.description=t),autofocus:"",autocomplete:"description"},null,8,["modelValue"])]),e("div",q,[c(N,{title:"Фото инструктора",item_id:0,field_id:"image",field_value:s.instructor.image,"model-value":s.instructor.image,folder:"instructors",onFilesDropped:C},null,8,["field_value","model-value"])]),e("div",A,[c(f,{value:"Дисциплины"}),(r(!0),n(k,null,x(s.disciplines,t=>(r(),n("div",null,[e("label",null,[g(e("input",{type:"checkbox","onUpdate:modelValue":u=>t.selected=u,class:"mr-2"},null,8,G),[[y,t.selected]]),b(m(t.name),1)])]))),256))]),s.instructor.id?(r(),n("div",H,[c(a,{format:"dd/MM/yyyy",modelValue:h.value,"onUpdate:modelValue":[i[2]||(i[2]=t=>h.value=t),w],"enable-time-picker":!1,position:"left",placeholder:"Дата",locale:"ru",onCleared:V,"auto-apply":""},null,8,["modelValue"])])):d("",!0),s.instructor.times?(r(),n("div",I,[e("table",J,[e("tbody",K,[(r(!0),n(k,null,x(s.instructor.times,t=>(r(),n("tr",null,[e("td",Q,m(t.start)+" - "+m(t.end),1),e("td",R,[g(e("input",{type:"checkbox","onUpdate:modelValue":u=>t.active=u,disabled:t.selected===!0},null,8,W),[[y,t.active]])]),e("td",X,[t.discipline?(r(),n("span",ee,"Забронировано: "+m(t.discipline),1)):d("",!0)])]))),256))])])])):d("",!0),c(z,{onClick:U},{default:v(()=>[b("Сохранить")]),_:1}),s.instructor.error?(r(),n("div",te,[e("div",se,[oe,e("div",ie,[e("h3",le,m(s.instructor.error),1)])])])):d("",!0),s.instructor.success?(r(),n("div",re,ne)):d("",!0),s.instructor.times?(r(),n("div",ce)):d("",!0)])])])]),_:1})}}};export{ge as default};
