import{K as u,T as w,o as a,c as r,a as c,u as s,w as v,F as _,Z as F,b as o,d as S,r as h,h as x,j as k,g as p,e as T,f as E,O as P}from"./app-a473435e.js";import{_ as b}from"./InputError-8a29ca6b.js";import{_ as V}from"./InputLabel-cb07ce22.js";import{P as z}from"./PrimaryButton-995e7312.js";import{_ as X}from"./TextInput-668120db.js";import{_ as J}from"./TextArea-9daedea3.js";import{_ as K}from"./AdminLayout-b0863d91.js";import{_ as R}from"./image-7a31fc63.js";import{_ as Z,a as q}from"./content-95498439.js";import{_ as A,a as G}from"./radio-22c81910.js";import"./TextArea.vue_vue_type_style_index_0_lang-25e727ca.js";/* empty css            */const H={class:"bg-white md:flex md:flex-row"},Q={class:"p-4 mt-6 space-y-6 w-full"},W=o("h2",{class:"text-lg font-medium text-black-50"},"Редактирование инфоблока",-1),Y={class:"space-y-2"},ee={key:0,class:"space-y-6"},te=o("h2",{class:"text-lg font-medium text-black-50 mb-2"},"Свойства",-1),se={key:1,class:"space-y-6"},oe=o("h2",{class:"text-lg font-medium text-black-50 mb-2"},"Элементы",-1),le=["id"],ie={class:"flex flex-row items-center justify-end gap-2"},ne=["onClick"],ae=["onClick"],re=o("svg",{fill:"currentColor",height:"10px",width:"10px",version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 330 330","xml:space":"preserve"},[o("path",{id:"XMLID_224_",d:`M325.606,229.393l-150.004-150C172.79,76.58,168.974,75,164.996,75c-3.979,0-7.794,1.581-10.607,4.394
                                                l-149.996,150c-5.858,5.858-5.858,15.355,0,21.213c5.857,5.857,15.355,5.858,21.213,0l139.39-139.393l139.397,139.393
                                                C307.322,253.536,311.161,255,315,255c3.839,0,7.678-1.464,10.607-4.394C331.464,244.748,331.464,235.251,325.606,229.393z`})],-1),ce=[re],me=["onClick"],de=o("svg",{fill:"currentColor",height:"10px",width:"10px",version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 330 330","xml:space":"preserve"},[o("path",{id:"XMLID_225_",d:`M325.607,79.393c-5.857-5.857-15.355-5.858-21.213,0.001l-139.39,139.393L25.607,79.393
                                            c-5.857-5.857-15.355-5.858-21.213,0.001c-5.858,5.858-5.858,15.355,0,21.213l150.004,150c2.813,2.813,6.628,4.393,10.606,4.393
                                            s7.794-1.581,10.606-4.394l149.996-150C331.465,94.749,331.465,85.251,325.607,79.393z`})],-1),pe=[de],ue={class:"flex items-center gap-4"},_e={key:0,class:"text-sm text-gray-600 dark:text-gray-400"},Be={__name:"Edit",props:{status:{type:String}},setup(fe){const C={Image:R,Text:A,Radio:G,Video:Z,Content:q},y=t=>C[t],m=u().props.block,f=u().props.props;let $=u().props.items;const U=u().props.fields,e=w({title:m.title,content:m.content,items:$,properties:f});console.log(f),w({id:m.id});function B(t){let i=e.items.splice(t,1);e.items.splice(t-1,0,i[0])}function D(t){let i=e.items.splice(t,1);e.items.splice(t+1,0,i[0])}function I(){console.log(e.items),e.items[Object.keys(e.items).length]=U,console.log(e.items)}function j(t){confirm("Вы действительно хотите удалить элеиент?")&&(e.items[t].remove=!0,document.getElementById("item_"+t).remove())}function L(t){console.log(t[0][0],t[1],t[2]);let i=t[1],n=t[2];console.log(e.items),e.items[i].fields[n].file=t[0]}function O(t){console.log(t[0][0]);let i=t[2];e.properties[i].file=t[0]}function M(){console.log(m),confirm("Вы действительно хотите удалить страницу?")&&P.delete(route("menus.destroy",m.id))}return(t,i)=>(a(),r(_,null,[c(s(F),{title:"Редактирование меню - "+s(m).title},null,8,["title"]),c(K,null,{default:v(()=>[o("section",null,[o("form",{onSubmit:i[2]||(i[2]=S(n=>s(e).patch(t.route("infoblocks.update",s(m))),["prevent"]))},[o("div",H,[o("div",Q,[W,o("div",null,[c(V,{for:"title",value:"Название блока"}),c(X,{id:"title",type:"text",class:"mt-1 block w-full",modelValue:s(e).title,"onUpdate:modelValue":i[0]||(i[0]=n=>s(e).title=n),autofocus:"",autocomplete:"title"},null,8,["modelValue"]),c(b,{class:"mt-2",message:s(e).errors.title},null,8,["message"])]),o("div",null,[c(V,{for:"content",value:"Текст блока",class:"mb-1"}),c(J,{modelValue:s(e).content,"onUpdate:modelValue":i[1]||(i[1]=n=>s(e).content=n),class:"mt-1 block w-full"},null,8,["modelValue"]),c(b,{class:"mt-2",message:s(e).errors.title},null,8,["message"])]),o("div",Y,[Object.keys(s(f)).length>0?(a(),r("div",ee,[te,(a(!0),r(_,null,h(s(e).properties,(n,l)=>(a(),x(k(y(n.type)),{title:n.title,list:JSON.parse(n.list),item_id:parseInt(l),field_id:l,field_value:n.value,modelValue:s(e).properties[l].value,"onUpdate:modelValue":d=>s(e).properties[l].value=d,onFilesDropped:O},null,40,["title","list","item_id","field_id","field_value","modelValue","onUpdate:modelValue"]))),256))])):p("",!0),s(m).array?(a(),r("div",se,[oe,(a(!0),r(_,null,h(s(e).items,(n,l)=>(a(),r("div",{key:l,class:"p-4 bg-gray-50 rounded-lg",id:"item_"+l},[(a(!0),r(_,null,h(n.fields,(d,g)=>(a(),x(k(y(d.field.type)),{title:d.field.title,list:null,item_id:parseInt(l),field_id:g,field_value:d.value,modelValue:s(e).items[l].fields[g].value,"onUpdate:modelValue":N=>s(e).items[l].fields[g].value=N,onFilesDropped:L},null,40,["title","item_id","field_id","field_value","modelValue","onUpdate:modelValue"]))),256)),o("div",ie,[o("span",{class:"cursor-pointer bg-red-500 p-2 rounded-lg text-xs text-white",onClick:d=>j(l)},"Удалить",8,ne),l>0?(a(),r("span",{key:0,class:"cursor-pointer p-2 bg-indigo-500 rounded-lg text-xs text-white",onClick:d=>B(l)},ce,8,ae)):p("",!0),l<Object.keys(s(e).items).length-1?(a(),r("span",{key:1,class:"cursor-pointer p-2 bg-indigo-500 rounded-lg text-xs text-white",onClick:d=>D(l)},pe,8,me)):p("",!0)])],8,le))),128)),o("div",{class:"h-50 flex flex-col items-center justify-center bg-gray-50 p-6 rounded-lg"},[o("span",{class:"cursor-pointer p-2 bg-indigo-500 rounded-lg text-xs text-white",onClick:I},"Добавить")])])):p("",!0),o("div",ue,[c(z,{disabled:s(e).processing},{default:v(()=>[T("Сохранить")]),_:1},8,["disabled"]),o("button",{onClick:M},"Удалить")]),c(E,{"enter-active-class":"transition ease-in-out","enter-from-class":"opacity-0","leave-active-class":"transition ease-in-out","leave-to-class":"opacity-0"},{default:v(()=>[s(e).recentlySuccessful?(a(),r("div",_e,"Сохранено")):p("",!0)]),_:1})])])])],32)])]),_:1})],64))}};export{Be as default};
