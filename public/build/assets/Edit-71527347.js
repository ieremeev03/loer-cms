import{K as u,T as V,o as n,c as d,a as r,u as t,w as g,F as p,Z as F,b as o,d as S,r as v,h as k,j as x,g as y,e as T,f as E,O as P}from"./app-3630c625.js";import{_ as b}from"./InputError-c737caa2.js";import{_ as $}from"./InputLabel-062778e3.js";import{P as J}from"./PrimaryButton-3787924a.js";import{_ as K}from"./TextInput-0eebd6bb.js";import{_ as L}from"./TextArea-b2b9b5d8.js";import{_ as M}from"./AdminLayout-90368ee4.js";import{_ as R}from"./image-dde746d0.js";import{_ as Z,a as q}from"./content-aad9767f.js";import{_ as z,a as A}from"./radio-a5531e8b.js";import"./TextArea.vue_vue_type_style_index_0_lang-23a84b4d.js";/* empty css            */const G={class:"bg-white md:flex md:flex-row"},H={class:"p-4 mt-6 space-y-6 w-full"},Q=o("h2",{class:"text-lg font-medium text-black-50"},"Редактирование инфоблока",-1),W={class:"space-y-2"},X={key:0,class:"space-y-6"},Y=o("h2",{class:"text-lg font-medium text-black-50 mb-2"},"Свойства",-1),ee={key:1,class:"space-y-6"},te=o("h2",{class:"text-lg font-medium text-black-50 mb-2"},"Элементы",-1),se=["id"],oe={class:"flex flex-row items-center justify-end"},le=["onClick"],ie={class:"flex items-center gap-4"},ae={key:0,class:"text-sm text-gray-600 dark:text-gray-400"},Ve={__name:"Edit",props:{status:{type:String}},setup(ne){const w={Image:R,Text:z,Radio:A,Video:Z,Content:q},h=s=>w[s],m=u().props.block,f=u().props.props;let C=u().props.items;const U=u().props.fields,e=V({title:m.title,content:m.content,items:C,properties:f});console.log(f),V({id:m.id});function B(){console.log(e.items),e.items[Object.keys(e.items).length]=U,console.log(e.items)}function I(s){confirm("Вы действительно хотите удалить элеиент?")&&(e.items[s].remove=!0,document.getElementById("item_"+s).remove())}function j(s){console.log(s[0][0],s[1],s[2]);let a=s[1],l=s[2];console.log(e.items),e.items[a].fields[l].file=s[0]}function D(s){console.log(s[0][0]);let a=s[2];e.properties[a].file=s[0]}function N(){console.log(m),confirm("Вы действительно хотите удалить страницу?")&&P.delete(route("menus.destroy",m.id))}return(s,a)=>(n(),d(p,null,[r(t(F),{title:"Редактирование меню - "+t(m).title},null,8,["title"]),r(M,null,{default:g(()=>[o("section",null,[o("form",{onSubmit:a[2]||(a[2]=S(l=>t(e).patch(s.route("infoblocks.update",t(m))),["prevent"]))},[o("div",G,[o("div",H,[Q,o("div",null,[r($,{for:"title",value:"Название блока"}),r(K,{id:"title",type:"text",class:"mt-1 block w-full",modelValue:t(e).title,"onUpdate:modelValue":a[0]||(a[0]=l=>t(e).title=l),autofocus:"",autocomplete:"title"},null,8,["modelValue"]),r(b,{class:"mt-2",message:t(e).errors.title},null,8,["message"])]),o("div",null,[r($,{for:"content",value:"Текст блока",class:"mb-1"}),r(L,{modelValue:t(e).content,"onUpdate:modelValue":a[1]||(a[1]=l=>t(e).content=l),class:"mt-1 block w-full"},null,8,["modelValue"]),r(b,{class:"mt-2",message:t(e).errors.title},null,8,["message"])]),o("div",W,[Object.keys(t(f)).length>0?(n(),d("div",X,[Y,(n(!0),d(p,null,v(t(e).properties,(l,i)=>(n(),k(x(h(l.type)),{title:l.title,list:JSON.parse(l.list),item_id:parseInt(i),field_id:i,field_value:l.value,modelValue:t(e).properties[i].value,"onUpdate:modelValue":c=>t(e).properties[i].value=c,onFilesDropped:D},null,40,["title","list","item_id","field_id","field_value","modelValue","onUpdate:modelValue"]))),256))])):y("",!0),t(m).array?(n(),d("div",ee,[te,(n(!0),d(p,null,v(t(e).items,(l,i)=>(n(),d("div",{key:i,class:"p-4 bg-gray-50 rounded-lg",id:"item_"+i},[(n(!0),d(p,null,v(l.fields,(c,_)=>(n(),k(x(h(c.field.type)),{title:c.field.title,list:null,item_id:parseInt(i),field_id:_,field_value:c.value,modelValue:t(e).items[i].fields[_].value,"onUpdate:modelValue":O=>t(e).items[i].fields[_].value=O,onFilesDropped:j},null,40,["title","item_id","field_id","field_value","modelValue","onUpdate:modelValue"]))),256)),o("div",oe,[o("span",{class:"cursor-pointer bg-red-500 p-2 rounded-lg text-xs text-white",onClick:c=>I(i)},"Удалить",8,le)])],8,se))),128)),o("div",{class:"h-50 flex flex-col items-center justify-center bg-gray-50 p-6 rounded-lg"},[o("span",{class:"cursor-pointer p-2 bg-indigo-500 rounded-lg text-xs text-white",onClick:B},"Добавить")])])):y("",!0),o("div",ie,[r(J,{disabled:t(e).processing},{default:g(()=>[T("Сохранить")]),_:1},8,["disabled"]),o("button",{onClick:N},"Удалить")]),r(E,{"enter-active-class":"transition ease-in-out","enter-from-class":"opacity-0","leave-active-class":"transition ease-in-out","leave-to-class":"opacity-0"},{default:g(()=>[t(e).recentlySuccessful?(n(),d("div",ae,"Сохранено")):y("",!0)]),_:1})])])])],32)])]),_:1})],64))}};export{Ve as default};
