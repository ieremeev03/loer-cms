import{K as p,T as w,o as a,c as m,a as r,u as o,w as g,F as u,Z as F,b as s,d as S,r as v,h as y,j as k,g as h,e as T,f as E,O as P}from"./app-8b11ea8a.js";import{_ as V}from"./InputError-2d41abea.js";import{_ as b}from"./InputLabel-62be8be3.js";import{P as z}from"./PrimaryButton-1437e73e.js";import{_ as X}from"./TextInput-2e5ae2f0.js";import{_ as J}from"./TextArea-2eb1ab6c.js";import{_ as K}from"./AdminLayout-3111afc6.js";import{_ as R}from"./image-6610ebec.js";import{_ as Z,a as q}from"./content-c5818364.js";import{_ as A,a as G}from"./radio-2595350f.js";import"./TextArea.vue_vue_type_style_index_0_lang-f9cf8d75.js";/* empty css            */const H={class:"bg-white md:flex md:flex-row"},Q={class:"p-4 mt-6 space-y-6 w-full"},W=s("h2",{class:"text-lg font-medium text-black-50"},"Редактирование инфоблока",-1),Y={class:"space-y-2"},ee={key:0,class:"space-y-6"},te=s("h2",{class:"text-lg font-medium text-black-50 mb-2"},"Свойства",-1),se={key:1,class:"space-y-6"},oe=s("h2",{class:"text-lg font-medium text-black-50 mb-2"},"Элементы",-1),le=["id"],ie={class:"flex flex-row items-center justify-end gap-2"},ne=["onClick"],ae=["onClick"],re=s("svg",{fill:"currentColor",height:"10px",width:"10px",version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 330 330","xml:space":"preserve"},[s("path",{id:"XMLID_224_",d:`M325.606,229.393l-150.004-150C172.79,76.58,168.974,75,164.996,75c-3.979,0-7.794,1.581-10.607,4.394
                                                l-149.996,150c-5.858,5.858-5.858,15.355,0,21.213c5.857,5.857,15.355,5.858,21.213,0l139.39-139.393l139.397,139.393
                                                C307.322,253.536,311.161,255,315,255c3.839,0,7.678-1.464,10.607-4.394C331.464,244.748,331.464,235.251,325.606,229.393z`})],-1),ce=[re],de=["onClick"],me=s("svg",{fill:"currentColor",height:"10px",width:"10px",version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 330 330","xml:space":"preserve"},[s("path",{id:"XMLID_225_",d:`M325.607,79.393c-5.857-5.857-15.355-5.858-21.213,0.001l-139.39,139.393L25.607,79.393
                                            c-5.857-5.857-15.355-5.858-21.213,0.001c-5.858,5.858-5.858,15.355,0,21.213l150.004,150c2.813,2.813,6.628,4.393,10.606,4.393
                                            s7.794-1.581,10.606-4.394l149.996-150C331.465,94.749,331.465,85.251,325.607,79.393z`})],-1),pe=[me],ue={class:"flex items-center gap-4"},_e={key:0,class:"text-sm text-gray-600 dark:text-gray-400"},Be={__name:"Edit",props:{status:{type:String}},setup(fe){const C={Image:R,Text:A,Radio:G,Video:Z,Content:q},x=t=>C[t],c=p().props.block,_=p().props.props;let $=p().props.items;const U=p().props.fields,e=w({title:c.title,content:c.content,items:$,properties:_});console.log(_),w({id:c.id});function B(t){let l=e.items.splice(t,1);e.items.splice(t-1,0,l[0])}function D(t){let l=e.items.splice(t,1);e.items.splice(t+1,0,l[0])}function I(){console.log(e.items),e.items[Object.keys(e.items).length]=U,console.log(e.items)}function L(t){confirm("Вы действительно хотите удалить элеиент?")&&(e.items[t].remove=!0,document.getElementById("item_"+t).remove())}function j(t){console.log(t[0][0],t[1],t[2]);let l=t[1],i=t[2];console.log(e.items),e.items[l].fields[i].file=t[0]}function M(t){console.log(t[0][0]);let l=t[2];e.properties[l].file=t[0]}function N(){console.log(c),confirm("Вы действительно хотите удалить страницу?")&&P.delete(route("menus.destroy",c.id))}return(t,l)=>(a(),m(u,null,[r(o(F),{title:"Редактирование меню - "+o(c).title},null,8,["title"]),r(K,null,{default:g(()=>[s("section",null,[s("form",{onSubmit:l[2]||(l[2]=S(i=>o(e).patch(t.route("infoblocks.update",o(c))),["prevent"]))},[s("div",H,[s("div",Q,[W,s("div",null,[r(b,{for:"title",value:"Название блока"}),r(X,{id:"title",type:"text",class:"mt-1 block w-full",modelValue:o(e).title,"onUpdate:modelValue":l[0]||(l[0]=i=>o(e).title=i),autofocus:"",autocomplete:"title"},null,8,["modelValue"]),r(V,{class:"mt-2",message:o(e).errors.title},null,8,["message"])]),s("div",null,[r(b,{for:"content",value:"Текст блока",class:"mb-1"}),r(J,{modelValue:o(e).content,"onUpdate:modelValue":l[1]||(l[1]=i=>o(e).content=i),class:"mt-1 block w-full"},null,8,["modelValue"]),r(V,{class:"mt-2",message:o(e).errors.title},null,8,["message"])]),s("div",Y,[Object.keys(o(_)).length>0?(a(),m("div",ee,[te,(a(!0),m(u,null,v(o(e).properties,(i,n)=>(a(),y(k(x(i.type)),{title:i.title,list:JSON.parse(i.list),item_id:parseInt(n),field_id:n,field_value:i.value,modelValue:o(e).properties[n].value,"onUpdate:modelValue":d=>o(e).properties[n].value=d,onFilesDropped:M},null,40,["title","list","item_id","field_id","field_value","modelValue","onUpdate:modelValue"]))),256))])):h("",!0),o(c).array?(a(),m("div",se,[oe,(a(!0),m(u,null,v(o(e).items,(i,n)=>(a(),m("div",{key:n,class:"p-4 bg-gray-50 rounded-lg",id:"item_"+n},[(a(!0),m(u,null,v(i.fields,(d,f)=>(a(),y(k(x(d.field.type)),{title:d.field.title,list:null,item_id:parseInt(n),field_id:f,field_value:d.value,modelValue:o(e).items[n].fields[f].value,"onUpdate:modelValue":O=>o(e).items[n].fields[f].value=O,onFilesDropped:j},null,40,["title","item_id","field_id","field_value","modelValue","onUpdate:modelValue"]))),256)),s("div",ie,[s("span",{class:"cursor-pointer bg-red-500 p-2 rounded-lg text-xs text-white",onClick:d=>L(n)},"Удалить",8,ne),s("span",{class:"cursor-pointer p-2 bg-indigo-500 rounded-lg text-xs text-white",onClick:d=>B(n)},ce,8,ae),s("span",{class:"cursor-pointer p-2 bg-indigo-500 rounded-lg text-xs text-white",onClick:d=>D(n)},pe,8,de)])],8,le))),128)),s("div",{class:"h-50 flex flex-col items-center justify-center bg-gray-50 p-6 rounded-lg"},[s("span",{class:"cursor-pointer p-2 bg-indigo-500 rounded-lg text-xs text-white",onClick:I},"Добавить")])])):h("",!0),s("div",ue,[r(z,{disabled:o(e).processing},{default:g(()=>[T("Сохранить")]),_:1},8,["disabled"]),s("button",{onClick:N},"Удалить")]),r(E,{"enter-active-class":"transition ease-in-out","enter-from-class":"opacity-0","leave-active-class":"transition ease-in-out","leave-to-class":"opacity-0"},{default:g(()=>[o(e).recentlySuccessful?(a(),m("div",_e,"Сохранено")):h("",!0)]),_:1})])])])],32)])]),_:1})],64))}};export{Be as default};
